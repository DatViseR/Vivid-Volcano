% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vivid_functions.R
\name{diagnose_expression_column}
\alias{diagnose_expression_column}
\title{Diagnose Expression Data Columns}
\usage{
diagnose_expression_column(log_messages_rv, log_event, uploaded_df)
}
\arguments{
\item{log_messages_rv}{Reactive value for storing log messages}

\item{log_event}{Logging function created by create_logger()}

\item{uploaded_df}{Reactive function returning the data frame to analyze}
}
\value{
Invisibly returns NULL. Function operates through side effects:
  \itemize{
    \item Updates the uploaded_df reactive value if suspicious values are removed
    \item Generates log messages
    \item Shows interactive alerts
  }
}
\description{
Identifies and handles potentially problematic values in expression-related 
columns (e.g., log2 fold changes, expression levels). Provides interactive alerts 
for user confirmation before removing suspicious data points.
}
\details{
Diagnose Expression Columns for Suspicious Values


Detection Process:
\enumerate{
  \item Identifies expression-related columns using keywords:
    \itemize{
      \item "log2"
      \item "expression"
      \item "fold"
    }
  \item Checks for values where abs(value) > 10
  \item Presents findings to user via shinyalert
  \item Removes flagged rows upon user confirmation
}
}
\note{
- Assumes log2-transformed expression values
- Values |x| > 10 are considered suspicious
- Case-insensitive column name matching
- Modifies data only with user confirmation
- Alert cannot be dismissed by clicking outside or pressing ESC
}
\section{Alert Features}{

The function generates an HTML-formatted alert showing:
\itemize{
  \item Number of suspicious values per column
  \item Column names with issues
  \item Option to proceed with removal
  \item Cannot be dismissed without user action
}
}

\section{Logging Messages}{

The function generates several types of log messages:
\describe{
  \item{Column Detection}{Reports found expression-related columns}
  \item{Value Analysis}{Reports presence/absence of suspicious values}
  \item{User Actions}{Records user's decision about removing rows}
  \item{Data Modification}{Reports number of rows removed if applicable}
}
}

\section{Dependencies}{

Requires the following packages:
\itemize{
  \item shinyalert: For interactive alerts
  \item htmltools: For HTML formatting in alerts
}
}

\examples{
\dontrun{
# In Shiny server context
server <- function(input, output, session) {
  log_messages <- reactiveVal("")
  logger <- create_logger(session)
  uploaded_df <- reactiveVal(data.frame(
    gene = c("A", "B", "C", "D"),
    log2_fc = c(2, 15, -1, -20),
    expression = c(1, 2, 11, 4)
  ))
  
  # Call the diagnostic function
  observeEvent(input$analyze, {
    diagnose_expression_column(
      log_messages_rv = log_messages,
      log_event = logger,
      uploaded_df = uploaded_df
    )
  })
}
}

}
\seealso{
\code{\link{create_logger}} for logging functionality
\code{\link[shinyalert]{shinyalert}} for alert creation
}
\author{
Tomasz StÄ™pkowski <dzdzstepel@gmail.com>
}
