% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vivid_functions.R
\name{build_gt_table}
\alias{build_gt_table}
\title{Build GO Enrichment GT Table}
\usage{
build_gt_table(
  enrichment_results_list,
  upregulated_count,
  downregulated_count,
  color_highlight,
  log_messages_rv,
  log_event
)
}
\arguments{
\item{enrichment_results_list}{List containing enrichment results with structure:
  \itemize{
    \item regulated$data: Data frame for bidirectionally regulated genes
    \item upregulated$data: Data frame for up-regulated genes
    \item downregulated$data: Data frame for down-regulated genes
  }
Each data frame must contain columns: GO_Category, id, Success_Population_Size, 
Sample_Size, Sample_Success_Size, P_Value, Adjusted_P_Value}

\item{upregulated_count}{Integer, number of up-regulated genes}

\item{downregulated_count}{Integer, number of down-regulated genes}

\item{color_highlight}{Character vector of length 2:
\itemize{
  \item [1]: Color for down-regulated section
  \item [2]: Color for up-regulated section
}}

\item{log_messages_rv}{Reactive value for storing log messages}

\item{log_event}{Logging function created by create_logger()}
}
\value{
A GT table object containing formatted enrichment results with:
  \itemize{
    \item Color-coded sections for each regulation type
    \item Enrichment ratios for detected and regulated genes
    \item Statistical test results with formatted p-values
    \item Explanatory footnotes
  }
}
\description{
Creates a formatted GT (Grammar of Tables) table displaying Gene 
Ontology enrichment results with separate sections for bidirectionally regulated, 
up-regulated, and down-regulated genes. Includes enrichment ratios, statistical 
tests, and comprehensive footnotes.
}
\details{
Build Formatted GT Table for Gene Ontology Enrichment Results


Table Features:
\itemize{
  \item Columns:
    \itemize{
      \item GO name: Gene Ontology term name
      \item GO id: Gene Ontology identifier
      \item Detected genes enrichment: Ratio of detected genes in GO term to total background
      \item Regulated genes enrichment: Ratio of regulated genes in GO term to total regulated
      \item Statistical tests: Raw and Bonferroni-adjusted p-values
      \item Gene counts: Numbers of detected and regulated genes in each category
    }
  \item Formatting:
    \itemize{
      \item P-values: "<0.001" for small values, 3 decimal places otherwise
      \item Enrichment ratios: 3 decimal places
      \item 12px font size
      \item Bold column headers
      \item Full-width table layout
    }
}
}
\note{
- P-values less than 0.001 are displayed as "<0.001"
- Bidirectionally regulated section uses light gray (#D3D3D3) background
- Sample_Size column is hidden but used for group labels
}
\section{Footnotes}{

The table includes detailed footnotes explaining:
\itemize{
  \item Bonferroni correction methodology (n=1160 for level 4 GO hierarchy)
  \item Detected gene enrichment calculation and interpretation
  \item Regulated gene enrichment calculation and interpretation
}
}

\examples{
\dontrun{
# In Shiny server context
server <- function(input, output, session) {
  log_messages <- reactiveVal("")
  logger <- create_logger(session)
  
  # Example enrichment results
  enrichment_results <- list(
    regulated = list(
      data = data.frame(
        GO_Category = c("DNA repair", "Cell cycle"),
        id = c("GO:0006281", "GO:0007049"),
        Success_Population_Size = c(100, 150),
        Sample_Size = c(50, 50),
        Sample_Success_Size = c(10, 15),
        P_Value = c(0.001, 0.01),
        Adjusted_P_Value = c(0.005, 0.03)
      )
    ),
    upregulated = list(data = data.frame(...)),
    downregulated = list(data = data.frame(...))
  )
  
  # Create table
  gt_table <- build_gt_table(
    enrichment_results_list = enrichment_results,
    upregulated_count = 30,
    downregulated_count = 20,
    color_highlight = c("#FFE6E6", "#E6FFE6"),  # Light red and light green
    log_messages = log_messages,
    log_event = logger
  )
}
}

}
\seealso{
\code{\link{create_logger}} for logging functionality
}
\author{
Tomasz StÄ™pkowski <dzdzstepel@gmail.com>
}
