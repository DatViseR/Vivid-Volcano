% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vivid_functions.R
\name{create_publication_plot}
\alias{create_publication_plot}
\title{Create Publication Plot}
\usage{
create_publication_plot(
  base_plot,
  width_mm,
  height_mm,
  log_messages_rv,
  log_event
)
}
\arguments{
\item{base_plot}{A ggplot2 object to be converted to publication format}

\item{width_mm}{Numeric, desired width in millimeters}

\item{height_mm}{Numeric, desired height in millimeters}

\item{log_messages_rv}{Reactive value for storing log messages}

\item{log_event}{Logging function created by create_logger()}
}
\value{
A modified ggplot2 object with publication-ready formatting
}
\description{
Converts a ggplot object into a publication-ready format by adjusting 
dimensions, point sizes, text sizes, and margins according to standardized journal 
figure specifications. Includes comprehensive logging of all modifications.
}
\details{
Supports five standardized size configurations:
\itemize{
  \item 85x85mm (single column square)
  \item 114x114mm (1.5 column square)
  \item 114x65mm (1.5 column rectangle)
  \item 174x174mm (double column square)
  \item 174x98mm (double column rectangle)
}

Point size configurations for each format:
\describe{
  \item{85x85mm}{base: 0.6, highlight: 0.9, annotation: 1.5}
  \item{114x114mm}{base: 0.8, highlight: 1.2, annotation: 2.0}
  \item{114x65mm}{base: 0.7, highlight: 1.05, annotation: 1.75}
  \item{174x174mm}{base: 1.0, highlight: 1.5, annotation: 2.5}
  \item{174x98mm}{base: 0.9, highlight: 1.35, annotation: 2.25}
}

Layout configurations:
\describe{
  \item{Compact (85x85mm, 114x65mm)}{
    \itemize{
      \item Title size: 10pt
      \item Text size: 6pt
      \item Margins: top=10pt, right=10pt, bottom=5pt, left=5pt
    }
  }
  \item{Standard (other sizes)}{
    \itemize{
      \item Title size: 12pt
      \item Text size: 8pt
      \item Margins: top=30pt, right=85pt, bottom=10pt, left=10pt
    }
  }
}
}
\note{
- Dimensions should be provided in millimeters
- The function automatically converts measurements to inches for ggsave compatibility
- Highlighted points are identified by their color (darkgreen or red)
- Annotations are identified by infinite x and y coordinates
}
\section{Plot Layer Modifications}{

The function automatically detects and modifies different types of layers:
\itemize{
  \item Point geometries: Adjusts sizes based on highlight status
  \item Text and label geometries: Adjusts sizes based on annotation status
  \item Theme elements: Updates text sizes and margins based on plot dimensions
}
}

\examples{
\dontrun{
# In Shiny server context
server <- function(input, output, session) {
  log_messages <- reactiveVal("")
  logger <- create_logger(session)
  
  # Create base volcano plot
  base_plot <- ggplot(data, aes(x = log2FC, y = -log10(pvalue))) +
    geom_point()
  
  # Convert to single-column publication format
  pub_plot <- create_publication_plot(
    base_plot = base_plot,
    width_mm = 85,
    height_mm = 85,
    log_messages = log_messages,
    log_event = logger
  )
  
  # Save the plot
  ggsave("publication_plot.pdf", pub_plot, 
         width = 85 * 0.0393701, 
         height = 85 * 0.0393701)
}
}

}
\seealso{
\code{\link{create_logger}} for logging functionality
\code{\link[ggplot2]{theme}} for theme modifications
}
